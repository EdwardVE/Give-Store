---
// src/pages/index.astro
import Layout from "../layouts/Layout.astro";
import HeroSection from "../components/HeroSection.astro";
import ProductCard from "../components/ProductCard.astro";
import { Icon } from "astro-icon/components"; // Necesario para la secci√≥n de categor√≠as
import { getProducts } from "@/lib/api/productApi";

//! TODO: seleccionar los productos destacados con el mejor rating
const products = (await getProducts()).slice(0, 4);

const pageTitle = "Give Store: Inicio - Comprar lo mejor en tecnolog√≠a";
const pageDescription =
  "La tienda en l√≠nea l√≠der para todos tus regalos y tecnolog√≠a. Env√≠o r√°pido y seguro.";
---

<Layout title={pageTitle} description={pageDescription}>
  <!-- La secci√≥n Hero (banner principal) -->
  <HeroSection />

  <!-- SECCI√ìN DE PRODUCTOS DESTACADOS -->
  <section class="container mx-auto px-4 py-8">
    <h2 class="text-3xl font-bold mb-6 text-gray-800 border-b pb-2">
      Productos Destacados
    </h2>
    <p class="text-lg text-gray-600 mb-8">
      ¬°Explora nuestra selecci√≥n m√°s popular y las ofertas del momento!
    </p>

    <!-- üí° CORRECCI√ìN: Eliminamos los <div> con estilos h-40 innecesarios. 
         Usamos sm:grid-cols-2 y lg:grid-cols-4 para un mejor dise√±o responsive. -->
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8">
      {
        products.map((product) => (
          <ProductCard
            name={product.name}
            price={product.price}
            image_url={product.image_url}
            slug={product.slug}
            isNew={product.isNew}
          />
        ))
      }
    </div>
  </section>

  <!-- NUEVA SECCI√ìN: NAVEGACI√ìN POR CATEGOR√çAS (A√±adida anteriormente) -->
  <section class="container mx-auto px-4 py-8">
    <h2 class="text-3xl font-bold mb-6 text-gray-800 border-b pb-2">
      Explorar Categor√≠as
    </h2>
    <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
      <a
        href="/category/audio"
        class="block bg-gray-100 p-6 rounded-xl shadow-md text-center hover:bg-gray-200 transition-colors"
      >
        <Icon
          name="mdi:headphones"
          class="w-10 h-10 mx-auto text-primary mb-2"
        />
        <span class="font-medium text-gray-700">Audio</span>
      </a>
      <a
        href="/category/wearables"
        class="block bg-gray-100 p-6 rounded-xl shadow-md text-center hover:bg-gray-200 transition-colors"
      >
        <Icon name="mdi:watch" class="w-10 h-10 mx-auto text-primary mb-2" />
        <span class="font-medium text-gray-700">Wearables</span>
      </a>
      <a
        href="/category/computadoras"
        class="block bg-gray-100 p-6 rounded-xl shadow-md text-center hover:bg-gray-200 transition-colors"
      >
        <Icon name="mdi:laptop" class="w-10 h-10 mx-auto text-primary mb-2" />
        <span class="font-medium text-gray-700">Computadoras</span>
      </a>
      <a
        href="/category/accesorios"
        class="block bg-gray-100 p-6 rounded-xl shadow-md text-center hover:bg-gray-200 transition-colors"
      >
        <Icon
          name="mdi:lightning-bolt"
          class="w-10 h-10 mx-auto text-primary mb-2"
        />
        <span class="font-medium text-gray-700">Accesorios</span>
      </a>
    </div>
  </section>
</Layout>
