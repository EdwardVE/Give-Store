---
// src/pages/products.astro
import Layout from "../layouts/Layout.astro";
import ProductCard from "../components/ProductCard.astro";
import { Icon } from "astro-icon/components";
import { getProducts } from "@/lib/api/productApi";
import ProductFilters from "@/components/ProductFilters.astro";

const pageTitle = "Todos los Productos - Give Store";
const pageDescription =
  "Descubre el catálogo completo de productos tecnológicos, desde wearables hasta accesorios de gaming.";

// Datos de ejemplo para el listado (deberían venir de una base de datos real)
const products = await getProducts();
const categories = [
  { label: "Audio", slug: "audio", count: 10 },
  { label: "Wearables", slug: "wearables", count: 5 },
  { label: "Computadoras", slug: "computadoras", count: 8 },
  { label: "Accesorios", slug: "accesorios", count: 12 },
  { label: "Gaming", slug: "gaming", count: 5 },
  { label: "Otros", slug: "otros", count: 3 },
];
---

<Layout title={pageTitle} description={pageDescription}>
  <section class="container mx-auto px-4 py-8">
    <!-- Título de la Página -->
    <h1 class="text-4xl font-extrabold text-gray-900 mb-8 border-b pb-4">
      Catálogo Completo
    </h1>

    <!-- Estructura de Listado (Sidebar + Productos) -->
    <div class="flex flex-col lg:flex-row gap-8">
      <!-- Barra Lateral de Filtros (Oculta en Móvil, Muestra en Desktop) -->
      <ProductFilters
        activePriceMax={50000}
        priceRange={{ minPrice: 0, maxPrice: 100000 }}
        activeCategory={null}
        categories={categories}
      />

      <!-- Área de Listado de Productos -->
      <main class="w-full lg:w-3/4">
        <!-- Barra de Ordenación/Contador -->
        <div class="flex justify-between items-center mb-6 border-b pb-4">
          <p class="text-gray-600">
            Mostrando <span class="font-bold text-gray-800"
              >{products.length}*</span
            > productos.
          </p>
          <select
            class="py-2 px-3 border border-gray-300 rounded-lg text-sm text-gray-700 focus:ring-primary focus:border-primary cursor-pointer"
          >
            <!-- //! TODO: Agregar funcionalidad, en el caso novedad order=new, order = price ascending , order = price descending -->
            <option class="cursor-pointer">Ordenar por Novedad</option>
            <option class="cursor-pointer"
              >Ordenar por Precio: Menor a Mayor</option
            >
            <option class="cursor-pointer"
              >Ordenar por Precio: Mayor a Menor</option
            >
          </select>
        </div>

        <!-- CUADRÍCULA DE PRODUCTOS -->
        <div
          class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8"
        >
          {
            products.map((product) => (
              <ProductCard
                name={product.name}
                price={product.price}
                image_url={product.image_url}
                slug={product.slug}
                isNew={product.isNew}
              />
            ))
          }
        </div>

        <!-- Paginación (Simulada) -->
        <div class="mt-12 flex justify-center space-x-2">
          <button
            class="p-3 border border-primary text-primary rounded-full hover:bg-primary hover:text-white transition-colors cursor-pointer"
          >
            <Icon name="mdi:arrow-left" class="w-5 h-5" />
          </button>
          <button
            class="px-4 py-2 bg-primary text-white rounded-full font-bold cursor-pointer"
            >1</button
          >
          <button
            class="px-4 py-2 border border-gray-300 rounded-full text-gray-700 hover:bg-gray-100 transition-colors cursor-pointer"
            >2</button
          >
          <button
            class="px-4 py-2 border border-gray-300 rounded-full text-gray-700 hover:bg-gray-100 transition-colors cursor-pointer"
            >3</button
          >
          <button
            class="p-3 border border-primary text-primary rounded-full hover:bg-primary hover:text-white transition-colors cursor-pointer"
          >
            <Icon name="mdi:arrow-right" class="w-5 h-5" />
          </button>
        </div>
      </main>
    </div>
  </section>
</Layout>
