---
// src/components/MobileDropdowns.astro
// Este componente contiene la estructura de los dos desplegables móviles.
import SearchInput from "./navigation/SearchInput.astro"; // ¡Ruta modularizada!

interface NavLink {
  title: string;
  href: string;
}

interface Props {
  navLinks: NavLink[];
}

const { navLinks } = Astro.props;
---

<!-- Este componente accede al estado 'isMenuOpen' y 'isSearchOpen' 
     definido en el componente padre (Header) a través del contexto de Alpine. --><!-- Desplegable de Búsqueda Móvil -->
<div
  x-cloak
  x-show="isSearchOpen"
  x-transition:enter="transition ease-out duration-300"
  x-transition:enter-start="opacity-0 -translate-y-2"
  x-transition:enter-end="opacity-100 translate-y-0"
  x-transition:leave="transition ease-in duration-200"
  x-transition:leave-start="opacity-100 translate-y-0"
  x-transition:leave-end="opacity-0 -translate-y-2"
  class="lg:hidden p-4 bg-gray-50 border-t border-gray-100 absolute w-full"
>
  <SearchInput isMobile={true} />
</div>

<!-- Desplegable de Navegación Móvil (Menú Hamburguesa) -->
<nav
  x-cloak
  x-show="isMenuOpen"
  x-transition:enter="transition ease-out duration-300"
  x-transition:enter-start="opacity-0 -translate-y-2"
  x-transition:enter-end="opacity-100 translate-y-0"
  x-transition:leave="transition ease-in duration-200"
  x-transition:leave-start="opacity-100 translate-y-0"
  x-transition:leave-end="opacity-0 -translate-y-2"
  class="md:hidden bg-white border-t border-gray-100 shadow-lg absolute w-full"
>
  <ul class="py-2">
    {
      navLinks.map((link) => (
        <li>
          <a
            href={link.href}
            class={`
                    block px-4 py-2 text-lg font-medium transition-colors duration-200 
                    ${
                      Astro.url.pathname === link.href ||
                      (link.href !== "/" &&
                        Astro.url.pathname.startsWith(link.href))
                        ? "bg-gray-100 text-primary font-bold"
                        : "text-gray-700 hover:bg-gray-50 hover:text-primary"
                    }
                `}
            aria-label={link.title}
            @click="isMenuOpen = false"
          >
            {link.title}
          </a>
        </li>
      ))
    }
    <!-- Enlace de Cuenta agregado al menú desplegable para fácil acceso -->
    <li>
      <a
        href="/account"
        class="block px-4 py-2 text-lg font-medium text-gray-700 hover:bg-gray-50 hover:text-primary transition-colors"
        @click="isMenuOpen = false"
      >
        Mi Cuenta
      </a>
    </li>
  </ul>
</nav>
